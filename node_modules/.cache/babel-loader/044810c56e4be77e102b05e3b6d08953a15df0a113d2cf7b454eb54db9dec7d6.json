{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jose_\\\\Desktop\\\\Corso pc\\\\Corso\\\\Pratica\\\\Progetto Finale\\\\frontend\\\\src\\\\pages\\\\GameDetail.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useParams, Link, useNavigate } from 'react-router-dom';\nimport api from '../services/apis';\nimport { useAuth } from '../context/AuthContext';\nimport './GameDetail.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GameDetail = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const {\n    user\n  } = useAuth();\n  const navigate = useNavigate();\n  const [game, setGame] = useState(null);\n  const [reviews, setReviews] = useState([]);\n  const [rating, setRating] = useState(5);\n  const [comment, setComment] = useState('');\n  const [hasReviewed, setHasReviewed] = useState(false);\n  const [editStates, setEditStates] = useState({});\n  const handleApiError = (err, defaultMsg = 'Errore generico') => {\n    var _err$response;\n    if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 429) {\n      alert('Troppi tentativi. Riprova pi√π tardi.');\n    } else {\n      var _err$response2, _err$response2$data;\n      alert(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || defaultMsg);\n    }\n  };\n  useEffect(() => {\n    const fetchGame = async () => {\n      try {\n        const res = await api.get(`/games/${id}`);\n        setGame(res.data);\n      } catch (err) {\n        handleApiError(err, \"Errore nel recupero del gioco.\");\n      }\n    };\n    const fetchReviews = async () => {\n      try {\n        const res = await api.get(`/reviews/${id}`);\n        setReviews(res.data);\n        if (user) {\n          const already = res.data.some(r => {\n            var _r$userId;\n            return ((_r$userId = r.userId) === null || _r$userId === void 0 ? void 0 : _r$userId._id) === user.id;\n          });\n          setHasReviewed(already);\n        }\n      } catch (err) {\n        handleApiError(err, \"Errore nel recupero delle recensioni.\");\n      }\n    };\n    fetchGame();\n    fetchReviews();\n  }, [id, user]);\n  const handleDelete = async () => {\n    if (!window.confirm('Sei sicuro di voler eliminare questo gioco?')) return;\n    try {\n      await api.delete(`/games/${id}`);\n      alert('Gioco eliminato con successo');\n      navigate('/');\n    } catch (err) {\n      handleApiError(err, \"Errore durante l'eliminazione\");\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      await api.post(`/reviews/${id}`, {\n        rating,\n        comment\n      });\n      setRating(5);\n      setComment('');\n      setHasReviewed(true);\n      const updated = await api.get(`/reviews/${id}`);\n      setReviews(updated.data);\n    } catch (err) {\n      handleApiError(err, \"Errore invio recensione\");\n    }\n  };\n  const handleDeleteReview = async (reviewId, isAuthor) => {\n    if (!window.confirm('Vuoi eliminare questa recensione?')) return;\n    try {\n      await api.delete(`/reviews/${reviewId}`);\n      setReviews(reviews.filter(r => r._id !== reviewId));\n      if (isAuthor) setHasReviewed(false);\n    } catch (err) {\n      handleApiError(err, \"Errore nella cancellazione\");\n    }\n  };\n  const handleEditToggle = id => {\n    setEditStates(prev => {\n      var _current$comment, _current$rating;\n      const review = reviews.find(r => r._id === id);\n      const current = prev[id] || {};\n      return {\n        ...prev,\n        [id]: {\n          editMode: !current.editMode,\n          comment: (_current$comment = current.comment) !== null && _current$comment !== void 0 ? _current$comment : review.comment,\n          rating: (_current$rating = current.rating) !== null && _current$rating !== void 0 ? _current$rating : review.rating\n        }\n      };\n    });\n  };\n  const handleEditChange = (id, field, value) => {\n    setEditStates(prev => ({\n      ...prev,\n      [id]: {\n        ...prev[id],\n        [field]: value\n      }\n    }));\n  };\n  const handleEditSave = async reviewId => {\n    const {\n      comment,\n      rating\n    } = editStates[reviewId];\n    try {\n      await api.put(`/reviews/${reviewId}`, {\n        comment,\n        rating\n      });\n      await handleEditToggle(reviewId);\n      const refreshed = await api.get(`/reviews/${id}`);\n      setReviews(refreshed.data);\n      setEditStates(prev => {\n        const newState = {\n          ...prev\n        };\n        delete newState[reviewId];\n        return newState;\n      });\n    } catch (err) {\n      handleApiError(err, \"Errore nella modifica\");\n    }\n  };\n  const getEmbedUrl = url => {\n    if (!url) return '';\n    const vimeoMatch = url.match(/vimeo\\.com\\/(?:video\\/)?(\\d+)/);\n    if (vimeoMatch) return `https://player.vimeo.com/video/${vimeoMatch[1]}`;\n    const ytMatch = url.match(/(?:youtu\\.be\\/|youtube\\.com\\/(?:watch\\?v=|embed\\/|v\\/))([\\w-]{11})/);\n    if (ytMatch) return `https://www.youtube.com/embed/${ytMatch[1]}`;\n    if (url.endsWith('.mp4')) return url;\n    return '';\n  };\n  if (!game) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Caricamento...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 21\n  }, this);\n  const isComingSoon = typeof game.stock === 'string' && game.stock.toLowerCase() === 'prossimamente';\n  const stockValue = isComingSoon ? 0 : typeof game.stock === 'string' ? parseInt(game.stock, 10) : game.stock;\n  const finalPrice = game.discount > 0 ? game.price * (1 - game.discount / 100) : game.price;\n  const shouldShowPrice = !isComingSoon && stockValue > 0;\n  const stockDisplay = isComingSoon ? 'üïê Prossimamente' : stockValue > 0 ? stockValue : '-';\n  const displayType = game.preorderEnabled ? 'Demo' : game.type || 'Gioco';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row align-items-start mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-4 mb-4 game-left-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: game.imageUrl,\n          alt: game.title,\n          className: \"img-fluid game-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 11\n        }, this), (user === null || user === void 0 ? void 0 : user.isAdmin) && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex flex-wrap gap-2 mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: `/admin/edit-game/${game._id}`,\n            className: \"btn btn-warning\",\n            children: \"\\u270F\\uFE0F Modifica Gioco\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: handleDelete,\n            children: \"\\uD83D\\uDDD1\\uFE0F Elimina Gioco\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83C\\uDFAE Genere:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 14\n          }, this), \" \", game.genre || '‚Äî']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDDD2 Piattaforma:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 14\n          }, this), \" \", game.platform || '‚Äî']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83C\\uDFF7 Tipo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 14\n          }, this), \" \", displayType]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDCCA Stock:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 14\n          }, this), \" \", stockDisplay]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDCB0 Prezzo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 14\n          }, this), ' ', shouldShowPrice ? game.discount > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-muted text-decoration-line-through me-2\",\n              children: [\"\\u20AC \", game.price.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-success fw-bold\",\n              children: [\"\\u20AC \", finalPrice.toFixed(2), \" (-\", game.discount, \"%)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\"\\u20AC \", game.price.toFixed(2)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: \"-\"\n          }, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), game.type === 'Gioco' && game.dlcLink && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83D\\uDD17 DLC disponibile:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 16\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: game.dlcLink,\n            className: \"text-primary text-decoration-underline\",\n            children: \"Vai al contenuto aggiuntivo \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 53\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this), game.type === 'DLC' && game.baseGameLink && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\uD83E\\uDDE9 Richiede gioco base:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 16\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: game.baseGameLink,\n            className: \"text-primary text-decoration-underline\",\n            children: \"Vai al gioco principale \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 57\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-md-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center text-md-start\",\n          children: game.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), game.description && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-3 text-justify game-description\",\n          children: game.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\uD83D\\uDD24 Recensioni\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), reviews.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Nessuna recensione per questo gioco.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card mb-4\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"list-group\",\n            style: {\n              maxHeight: reviews.length > 3 ? '300px' : 'auto',\n              overflowY: reviews.length > 3 ? 'auto' : 'visible'\n            },\n            children: reviews.map(r => {\n              var _r$userId2, _r$userId3;\n              const isAuthor = (user === null || user === void 0 ? void 0 : user.id) === ((_r$userId2 = r.userId) === null || _r$userId2 === void 0 ? void 0 : _r$userId2._id);\n              const isAdmin = user === null || user === void 0 ? void 0 : user.isAdmin;\n              const editable = isAuthor;\n              const removable = isAuthor || isAdmin;\n              const state = editStates[r._id] || {\n                editMode: false,\n                comment: r.comment,\n                rating: r.rating\n              };\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"list-group-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: ((_r$userId3 = r.userId) === null || _r$userId3 === void 0 ? void 0 : _r$userId3.username) || 'Anonimo'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 221,\n                  columnNumber: 23\n                }, this), \" \\u2014 \\u2B50 \", r.rating, \"/5\", !state.editMode ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: r.comment\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 223,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                    className: \"form-select mb-2\",\n                    value: state.rating,\n                    onChange: e => handleEditChange(r._id, 'rating', Number(e.target.value)),\n                    children: [5, 4, 3, 2, 1].map(n => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: n,\n                      children: [n, \" \\u2B50\"]\n                    }, n, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 228,\n                      columnNumber: 31\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    className: \"form-control mb-2\",\n                    value: state.comment,\n                    onChange: e => handleEditChange(r._id, 'comment', e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-center mt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"small\", {\n                    children: new Date(r.date).toLocaleString('it-IT', {\n                      day: '2-digit',\n                      month: '2-digit',\n                      year: 'numeric',\n                      hour: '2-digit',\n                      minute: '2-digit',\n                      hour12: false\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 235,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"review-actions\",\n                    children: state.editMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-success btn-sm me-2\",\n                        onClick: () => handleEditSave(r._id),\n                        children: \"\\uD83D\\uDCBE Salva\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 239,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-secondary btn-sm\",\n                        onClick: () => handleEditToggle(r._id),\n                        children: \"\\u274C Annulla\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [editable && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-warning btn-sm me-2\",\n                        onClick: () => handleEditToggle(r._id),\n                        children: \"\\u270F\\uFE0F Modifica\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 244,\n                        columnNumber: 44\n                      }, this), removable && /*#__PURE__*/_jsxDEV(\"button\", {\n                        className: \"btn btn-danger btn-sm\",\n                        onClick: () => handleDeleteReview(r._id, isAuthor),\n                        children: \"\\uD83D\\uDDD1\\uFE0F Elimina\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 245,\n                        columnNumber: 45\n                      }, this)]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 234,\n                  columnNumber: 23\n                }, this)]\n              }, r._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 21\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }, this), user && !hasReviewed && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"mt-4\",\n            children: \"Lascia una recensione\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Voto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: rating,\n                onChange: e => setRating(Number(e.target.value)),\n                children: [5, 4, 3, 2, 1].map(n => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: n,\n                  children: [n, \" \\u2B50\"]\n                }, n, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 265,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Commento\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \"form-control\",\n                value: comment,\n                onChange: e => setComment(e.target.value),\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              children: \"Invia recensione\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true), user && hasReviewed && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted mt-3\",\n          children: \"Hai gi\\xE0 recensito questo gioco.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), game.trailerUrl && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trailer-wrapper\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83C\\uDFAC Trailer\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ratio ratio-16x9\",\n        children: getEmbedUrl(game.trailerUrl).endsWith('.mp4') ? /*#__PURE__*/_jsxDEV(\"video\", {\n          controls: true,\n          src: getEmbedUrl(game.trailerUrl),\n          width: \"100%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"iframe\", {\n          src: getEmbedUrl(game.trailerUrl),\n          title: \"Trailer video\",\n          allow: \"autoplay; fullscreen; picture-in-picture\",\n          allowFullScreen: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 156,\n    columnNumber: 5\n  }, this);\n};\n_s(GameDetail, \"v1vcO4qmduO9KmMFyFj8/c8hSls=\", false, function () {\n  return [useParams, useAuth, useNavigate];\n});\n_c = GameDetail;\nexport default GameDetail;\nvar _c;\n$RefreshReg$(_c, \"GameDetail\");","map":{"version":3,"names":["useEffect","useState","useParams","Link","useNavigate","api","useAuth","jsxDEV","_jsxDEV","Fragment","_Fragment","GameDetail","_s","id","user","navigate","game","setGame","reviews","setReviews","rating","setRating","comment","setComment","hasReviewed","setHasReviewed","editStates","setEditStates","handleApiError","err","defaultMsg","_err$response","response","status","alert","_err$response2","_err$response2$data","data","error","fetchGame","res","get","fetchReviews","already","some","r","_r$userId","userId","_id","handleDelete","window","confirm","delete","handleSubmit","e","preventDefault","post","updated","handleDeleteReview","reviewId","isAuthor","filter","handleEditToggle","prev","_current$comment","_current$rating","review","find","current","editMode","handleEditChange","field","value","handleEditSave","put","refreshed","newState","getEmbedUrl","url","vimeoMatch","match","ytMatch","endsWith","children","fileName","_jsxFileName","lineNumber","columnNumber","isComingSoon","stock","toLowerCase","stockValue","parseInt","finalPrice","discount","price","shouldShowPrice","stockDisplay","displayType","preorderEnabled","type","className","src","imageUrl","alt","title","isAdmin","to","onClick","genre","platform","toFixed","dlcLink","href","baseGameLink","description","length","style","maxHeight","overflowY","map","_r$userId2","_r$userId3","editable","removable","state","username","onChange","Number","target","n","Date","date","toLocaleString","day","month","year","hour","minute","hour12","onSubmit","required","trailerUrl","controls","width","allow","allowFullScreen","_c","$RefreshReg$"],"sources":["C:/Users/jose_/Desktop/Corso pc/Corso/Pratica/Progetto Finale/frontend/src/pages/GameDetail.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useParams, Link, useNavigate } from 'react-router-dom';\r\nimport api from '../services/apis';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport './GameDetail.css';\r\n\r\nconst GameDetail = () => {\r\n  const { id } = useParams();\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [game, setGame] = useState(null);\r\n  const [reviews, setReviews] = useState([]);\r\n  const [rating, setRating] = useState(5);\r\n  const [comment, setComment] = useState('');\r\n  const [hasReviewed, setHasReviewed] = useState(false);\r\n  const [editStates, setEditStates] = useState({});\r\n\r\n  const handleApiError = (err, defaultMsg = 'Errore generico') => {\r\n    if (err.response?.status === 429) {\r\n      alert('Troppi tentativi. Riprova pi√π tardi.');\r\n    } else {\r\n      alert(err.response?.data?.error || defaultMsg);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const fetchGame = async () => {\r\n      try {\r\n        const res = await api.get(`/games/${id}`);\r\n        setGame(res.data);\r\n      } catch (err) {\r\n        handleApiError(err, \"Errore nel recupero del gioco.\");\r\n      }\r\n    };\r\n\r\n    const fetchReviews = async () => {\r\n      try {\r\n        const res = await api.get(`/reviews/${id}`);\r\n        setReviews(res.data);\r\n        if (user) {\r\n          const already = res.data.some(r => r.userId?._id === user.id);\r\n          setHasReviewed(already);\r\n        }\r\n      } catch (err) {\r\n        handleApiError(err, \"Errore nel recupero delle recensioni.\");\r\n      }\r\n    };\r\n\r\n    fetchGame();\r\n    fetchReviews();\r\n  }, [id, user]);\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm('Sei sicuro di voler eliminare questo gioco?')) return;\r\n    try {\r\n      await api.delete(`/games/${id}`);\r\n      alert('Gioco eliminato con successo');\r\n      navigate('/');\r\n    } catch (err) {\r\n      handleApiError(err, \"Errore durante l'eliminazione\");\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await api.post(`/reviews/${id}`, { rating, comment });\r\n      setRating(5);\r\n      setComment('');\r\n      setHasReviewed(true);\r\n      const updated = await api.get(`/reviews/${id}`);\r\n      setReviews(updated.data);\r\n    } catch (err) {\r\n      handleApiError(err, \"Errore invio recensione\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteReview = async (reviewId, isAuthor) => {\r\n    if (!window.confirm('Vuoi eliminare questa recensione?')) return;\r\n    try {\r\n      await api.delete(`/reviews/${reviewId}`);\r\n      setReviews(reviews.filter((r) => r._id !== reviewId));\r\n      if (isAuthor) setHasReviewed(false);\r\n    } catch (err) {\r\n      handleApiError(err, \"Errore nella cancellazione\");\r\n    }\r\n  };\r\n\r\n  const handleEditToggle = (id) => {\r\n    setEditStates(prev => {\r\n      const review = reviews.find(r => r._id === id);\r\n      const current = prev[id] || {};\r\n      return {\r\n        ...prev,\r\n        [id]: {\r\n          editMode: !current.editMode,\r\n          comment: current.comment ?? review.comment,\r\n          rating: current.rating ?? review.rating\r\n        }\r\n      };\r\n    });\r\n  };\r\n\r\n  const handleEditChange = (id, field, value) => {\r\n    setEditStates(prev => ({\r\n      ...prev,\r\n      [id]: { ...prev[id], [field]: value }\r\n    }));\r\n  };\r\n\r\n  const handleEditSave = async (reviewId) => {\r\n    const { comment, rating } = editStates[reviewId];\r\n    try {\r\n      await api.put(`/reviews/${reviewId}`, { comment, rating });\r\n      await handleEditToggle(reviewId);\r\n      const refreshed = await api.get(`/reviews/${id}`);\r\n      setReviews(refreshed.data);\r\n      setEditStates(prev => {\r\n        const newState = { ...prev };\r\n        delete newState[reviewId];\r\n        return newState;\r\n      });\r\n    } catch (err) {\r\n      handleApiError(err, \"Errore nella modifica\");\r\n    }\r\n  };\r\n\r\n  const getEmbedUrl = (url) => {\r\n    if (!url) return '';\r\n    const vimeoMatch = url.match(/vimeo\\.com\\/(?:video\\/)?(\\d+)/);\r\n    if (vimeoMatch) return `https://player.vimeo.com/video/${vimeoMatch[1]}`;\r\n    const ytMatch = url.match(/(?:youtu\\.be\\/|youtube\\.com\\/(?:watch\\?v=|embed\\/|v\\/))([\\w-]{11})/);\r\n    if (ytMatch) return `https://www.youtube.com/embed/${ytMatch[1]}`;\r\n    if (url.endsWith('.mp4')) return url;\r\n    return '';\r\n  };\r\n\r\n  if (!game) return <p>Caricamento...</p>;\r\n\r\n  const isComingSoon = typeof game.stock === 'string' && game.stock.toLowerCase() === 'prossimamente';\r\n  const stockValue = isComingSoon\r\n    ? 0\r\n    : typeof game.stock === 'string'\r\n      ? parseInt(game.stock, 10)\r\n      : game.stock;\r\n\r\n  const finalPrice = game.discount > 0\r\n    ? game.price * (1 - game.discount / 100)\r\n    : game.price;\r\n\r\n  const shouldShowPrice = !isComingSoon && stockValue > 0;\r\n  const stockDisplay = isComingSoon ? 'üïê Prossimamente' : (stockValue > 0 ? stockValue : '-');\r\n  const displayType = game.preorderEnabled ? 'Demo' : (game.type || 'Gioco');\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <div className=\"row align-items-start mb-4\">\r\n        <div className=\"col-md-4 mb-4 game-left-col\">\r\n          <img src={game.imageUrl} alt={game.title} className=\"img-fluid game-cover\" />\r\n          {user?.isAdmin && (\r\n            <div className=\"d-flex flex-wrap gap-2 mb-3\">\r\n              <Link to={`/admin/edit-game/${game._id}`} className=\"btn btn-warning\">‚úèÔ∏è Modifica Gioco</Link>\r\n              <button className=\"btn btn-danger\" onClick={handleDelete}>üóëÔ∏è Elimina Gioco</button>\r\n            </div>\r\n          )}\r\n          <p><strong>üéÆ Genere:</strong> {game.genre || '‚Äî'}</p>\r\n          <p><strong>üóí Piattaforma:</strong> {game.platform || '‚Äî'}</p>\r\n          <p><strong>üè∑ Tipo:</strong> {displayType}</p>\r\n          <p><strong>üìä Stock:</strong> {stockDisplay}</p>\r\n          <p><strong>üí∞ Prezzo:</strong>{' '}\r\n            {shouldShowPrice ? (\r\n              game.discount > 0 ? (\r\n                <>\r\n                  <span className=\"text-muted text-decoration-line-through me-2\">\r\n                    ‚Ç¨ {game.price.toFixed(2)}\r\n                  </span>\r\n                  <span className=\"text-success fw-bold\">\r\n                    ‚Ç¨ {finalPrice.toFixed(2)} (-{game.discount}%)\r\n                  </span>\r\n                </>\r\n              ) : (\r\n                <>‚Ç¨ {game.price.toFixed(2)}</>\r\n              )\r\n            ) : (\r\n              <>-</>\r\n            )}\r\n          </p>\r\n          {game.type === 'Gioco' && game.dlcLink && (\r\n            <p><strong>üîó DLC disponibile:</strong> <a href={game.dlcLink} className=\"text-primary text-decoration-underline\">Vai al contenuto aggiuntivo ‚Üí</a></p>\r\n          )}\r\n          {game.type === 'DLC' && game.baseGameLink && (\r\n            <p><strong>üß© Richiede gioco base:</strong> <a href={game.baseGameLink} className=\"text-primary text-decoration-underline\">Vai al gioco principale ‚Üí</a></p>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"col-md-8\">\r\n          <h2 className=\"text-center text-md-start\">{game.title}</h2>\r\n          {game.description && (\r\n            <p className=\"mt-3 text-justify game-description\">{game.description}</p>\r\n          )}\r\n          <hr />\r\n          <h4>üî§ Recensioni</h4>\r\n          {reviews.length === 0 ? (\r\n            <p>Nessuna recensione per questo gioco.</p>\r\n          ) : (\r\n            <div className=\"card mb-4\">\r\n              <div className=\"list-group\" style={{ maxHeight: reviews.length > 3 ? '300px' : 'auto', overflowY: reviews.length > 3 ? 'auto' : 'visible' }}>\r\n                {reviews.map((r) => {\r\n                  const isAuthor = user?.id === r.userId?._id;\r\n                  const isAdmin = user?.isAdmin;\r\n                  const editable = isAuthor;\r\n                  const removable = isAuthor || isAdmin;\r\n                  const state = editStates[r._id] || {\r\n                    editMode: false,\r\n                    comment: r.comment,\r\n                    rating: r.rating\r\n                  };\r\n\r\n                  return (\r\n                    <div key={r._id} className=\"list-group-item\">\r\n                      <strong>{r.userId?.username || 'Anonimo'}</strong> ‚Äî ‚≠ê {r.rating}/5\r\n                      {!state.editMode ? (\r\n                        <p>{r.comment}</p>\r\n                      ) : (\r\n                        <>\r\n                          <select className=\"form-select mb-2\" value={state.rating} onChange={(e) => handleEditChange(r._id, 'rating', Number(e.target.value))}>\r\n                            {[5, 4, 3, 2, 1].map((n) => (\r\n                              <option key={n} value={n}>{n} ‚≠ê</option>\r\n                            ))}\r\n                          </select>\r\n                          <textarea className=\"form-control mb-2\" value={state.comment} onChange={(e) => handleEditChange(r._id, 'comment', e.target.value)} />\r\n                        </>\r\n                      )}\r\n                      <div className=\"d-flex justify-content-between align-items-center mt-2\">\r\n                        <small>{new Date(r.date).toLocaleString('it-IT', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', minute: '2-digit', hour12: false })}</small>\r\n                        <div className=\"review-actions\">\r\n                          {state.editMode ? (\r\n                            <>\r\n                              <button className=\"btn btn-success btn-sm me-2\" onClick={() => handleEditSave(r._id)}>üíæ Salva</button>\r\n                              <button className=\"btn btn-secondary btn-sm\" onClick={() => handleEditToggle(r._id)}>‚ùå Annulla</button>\r\n                            </>\r\n                          ) : (\r\n                            <>\r\n                              {editable && <button className=\"btn btn-warning btn-sm me-2\" onClick={() => handleEditToggle(r._id)}>‚úèÔ∏è Modifica</button>}\r\n                              {removable && <button className=\"btn btn-danger btn-sm\" onClick={() => handleDeleteReview(r._id, isAuthor)}>üóëÔ∏è Elimina</button>}\r\n                            </>\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {user && !hasReviewed && (\r\n            <>\r\n              <h5 className=\"mt-4\">Lascia una recensione</h5>\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"mb-2\">\r\n                  <label>Voto</label>\r\n                  <select className=\"form-select\" value={rating} onChange={e => setRating(Number(e.target.value))}>\r\n                    {[5, 4, 3, 2, 1].map(n => (\r\n                      <option key={n} value={n}>{n} ‚≠ê</option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n                <div className=\"mb-2\">\r\n                  <label>Commento</label>\r\n                  <textarea className=\"form-control\" value={comment} onChange={e => setComment(e.target.value)} required />\r\n                </div>\r\n                <button className=\"btn btn-primary\">Invia recensione</button>\r\n              </form>\r\n            </>\r\n          )}\r\n\r\n          {user && hasReviewed && <p className=\"text-muted mt-3\">Hai gi√† recensito questo gioco.</p>}\r\n        </div>\r\n      </div>\r\n\r\n      {game.trailerUrl && (\r\n        <div className=\"trailer-wrapper\">\r\n          <h4>üé¨ Trailer</h4>\r\n          <div className=\"ratio ratio-16x9\">\r\n            {getEmbedUrl(game.trailerUrl).endsWith('.mp4') ? (\r\n              <video controls src={getEmbedUrl(game.trailerUrl)} width=\"100%\" />\r\n            ) : (\r\n              <iframe src={getEmbedUrl(game.trailerUrl)} title=\"Trailer video\" allow=\"autoplay; fullscreen; picture-in-picture\" allowFullScreen />\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GameDetail;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}